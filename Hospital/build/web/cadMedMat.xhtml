<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta charset="UTF-8"/>
        <title>Cadastro de Medicamentos/Materiais</title>
        <link rel="stylesheet" href="../css/bootstrap.min.css"/>   
    </h:head>
    <h:body>
        <main role="main" class="flex-shrink-0">
            <div class="container">
                <br/> <h1 style="text-align: center;">Sistema Clínica Veterinária</h1> <br/>
                <h:link outcome="cadMedico" value="Cadastro de Médico"/> <br/>
                <h:link outcome="cadProprietario" value="Cadastro de Tutor"/> <br/>
                <h:link outcome="cadAnimal" value="Cadastro de Animal"/> <br/>
                <h:link outcome="cadFuncionario" value="Cadastro de Funcionário"/> <br/>
                <h:link outcome="cadAtendimento" value="Atendimentos"/> <br/>
                <h:form id="frmCad">
                    <br/>
                    <h3>Cadastro de Medicamentos/Materiais</h3>
                    <h:panelGrid columns="2">   
                        <h:outputLabel for="nome" value="Nome:" />
                        <h:inputText id="nome" value="#{MedMatControle.med.nome}" />
                        <h:outputLabel value="Estoque:" />
                        <h:inputText id="Raca" value="#{MedMatControle.med.estoque}" />
                        <h:outputLabel value="Valor:" />
                        <h:inputText id="Idade" value="#{MedMatControle.med.valor}" />
                    </h:panelGrid> <br/>
                    <p:commandButton class="save-btn" value="Salvar" action="#{MedMatControle.incluir()}" update="frmCad, :frmTable" />  
                </h:form>
                <br/>
                <h:form id="frmTable"> 
                    <p:dataTable id="tbMedMat" var="med" value="#{MedMatControle.lista}" paginator="true" rows="50" emptyMessage="Não há registros na lista" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,15,25,50,100">
                        <f:facet name="header">Lista de Medicamentos/Materiais</f:facet>
                        <p:column headerText="Código" style="width: 10%;" sortBy="#{med.codigo}">
                            <h:outputText value="#{med.codigo}"/>
                        </p:column>
                        <p:column headerText="Nome" style="width: 15%;" sortBy="#{med.nome}">	
                            <h:outputText value="#{med.nome}"/>
                        </p:column>
                        <p:column headerText="Estoque" style="width: 15%;" sortBy="#{med.estoque}">
                            <h:outputText value="#{med.estoque}"/>
                        </p:column>
                        <p:column headerText="Valor" style="width: 15%;" sortBy="#{med.valor}">
                            <h:outputText value="#{med.valor}"/>
                        </p:column>
                        <p:column headerText="">
                            <p:commandButton value="Editar" action="#{MedMatControle.preparaAlterar(med)}" onclick="PF('editarDialog').show()" update=":formAltera"/>
                        </p:column>
                        <p:column headerText="">
                            <p:commandButton value="Excluir" actionListener="#{MedMatControle.excluir(med)}" update=":frmTable">
                                <p:confirm header="Excluir medicamento/material" message="Tem certeza que deseja excluir este medicamento/material?"/>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:outputPanel style="width: 100%; text-align:center" layout="block"> 
                            <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes"/>
                            <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no"/>
                        </p:outputPanel>
                    </p:confirmDialog>                    
                </h:form>
                <p:dialog id="editarDialog" widgetVar="editarDialog" modal="true" header="Alteração de medicamento/material">   
                    <h:form id="formAltera">  
                        <h:panelGrid columns="2">   
                            <h:outputLabel for="nome" value="Nome:" />
                            <h:inputText id="nome" value="#{MedMatControle.med.nome}" />
                            <h:outputLabel value="Estoque:" />
                            <h:inputText id="Raca" value="#{MedMatControle.med.estoque}" />
                            <h:outputLabel value="Valor:" />
                            <h:inputText id="Idade" value="#{MedMatControle.med.valor}" />
                        </h:panelGrid> 
                        <p:outputPanel style="width: 100%; text-align:center"> <br/>
                            <p:commandButton value="Continuar" ajax="false" action="#{MedMatControle.alterar()}" styleClass="ui-state-hover"/> 
                        </p:outputPanel>
                    </h:form>
                </p:dialog>
                <br/>
                <footer class="site-footer">
                    <h:form id="frmSair">
                        <p:commandButton action="#{loginControle.actionLogout()}" value="Sair"/>
                    </h:form>
                </footer>
            </div>
        </main>
        <br/>
    </h:body>
</html>